<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Chosen Palette: Sky Blue & Neutral Grays -->
    <!-- Application Structure Plan: A single-page application with a tab-based navigation to switch between K-POP, K-DRAMA, and K-FILM sections. Each section features an interactive dashboard with filterable source cards and a reliability visualization chart. This portal-like structure allows users to actively explore and synthesize the report's data, rather than passively reading a linear document. A modal view provides in-depth details for each source, creating a rich, self-contained user experience. -->
    <!-- Visualization & Content Choices: Goal: Enable users to compare and select media sources. Method: Interactive cards for each source, filterable by reliability, region, and content type. A dynamic Chart.js donut chart visualizes the reliability distribution of sources in each category. Goal: Provide detailed information. Method: Modal pop-ups display comprehensive data from the report's tables for each source. This approach is chosen to present complex data in an organized, interactive, and easily digestible format without overwhelming the user. CONFIRMATION: NO SVG/Mermaid used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>하늘그룹 한류 뉴스 포털</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .hero-section { background: linear-gradient(135deg, #3B82F6, #1E40AF); }
        .active-tab { border-color: #3B82F6; color: #3B82F6; }
        .tab-item { cursor: pointer; }
        .tag { display: inline-block; padding: 2px 8px; border-radius: 9999px; font-size: 0.75rem; font-weight: 500; }
        .reliability-high { background-color: #D1FAE5; color: #065F46; }
        .reliability-medium { background-color: #FEF3C7; color: #92400E; }
        .reliability-caution { background-color: #FEE2E2; color: #991B1B; }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="#" class="flex items-center space-x-2">
                    <img src="https://placehold.co/128x128/3b82f6/ffffff?text=H" alt="하늘그룹 로고" class="h-8 w-8">
                    <span class="text-xl font-bold text-gray-800">하늘그룹 한류 뉴스 포털</span>
                </a>
                <nav class="hidden md:flex space-x-8">
                    <a href="#dashboard" class="text-gray-600 hover:text-blue-600">대시보드</a>
                    <a href="#guide" class="text-gray-600 hover:text-blue-600">포털 가이드</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section text-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4">궁극의 한류 허브</h1>
            <p class="text-lg md:text-xl max-w-3xl mx-auto opacity-90">
    한류의 모든 것, 한 곳에서! 신뢰할 수 있는 K-POP, K-드라마, 한국 영화 정보를 쉽고 빠르게 만나보세요.
</p>
        </div>
    </section>

    <!-- Main Dashboard Section -->
    <main id="dashboard" class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- Navigation Tabs -->
        <div class="border-b border-gray-200 mb-8">
            <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                <button class="tab-item whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm active-tab" data-tab="kpop">
                    <i class="ri-music-2-line mr-2"></i>K-POP
                </button>
                <button class="tab-item whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="kdrama">
                    <i class="ri-tv-2-line mr-2"></i>K-드라마
                </button>
                <button class="tab-item whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="kmovie">
                    <i class="ri-film-line mr-2"></i>한국 영화
                </button>
            </nav>
        </div>

        <!-- Content Area -->
        <div id="content-area">
            <!-- Dynamic content will be injected here -->
        </div>
    </main>

    <!-- Media Literacy Guide Section -->
    <section id="guide" class="bg-white py-16">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-10">한류 미디어 리터러시 가이드</h2>
            <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="font-bold text-lg mb-3 flex items-center"><i class="ri-checkbox-circle-line text-blue-500 mr-2"></i>신뢰할 수 있는 정보원 활용법</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><strong>공식 출처 확인:</strong> 아티스트 소속사, 제작사, 신뢰도 높은 언론사의 공식 발표를 우선적으로 확인하세요.</li>
                        <li><strong>신뢰도 높은 번역:</strong> Soompi, The Korea Herald 등 정확한 번역으로 검증된 매체를 활용하세요.</li>
                        <li><strong>교차 확인 습관화:</strong> 자극적인 뉴스는 여러 신뢰할 수 있는 정보원을 통해 사실 여부를 확인하는 것이 중요합니다.</li>
                    </ul>
                </div>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="font-bold text-lg mb-3 flex items-center"><i class="ri-error-warning-line text-yellow-500 mr-2"></i>신중한 접근이 필요한 경우</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><strong>선정주의 경계:</strong> 조회수를 위해 자극적인 제목이나 확인되지 않은 루머를 퍼뜨리는 매체는 비판적으로 수용해야 합니다.</li>
                        <li><strong>네티즌 반응의 함정:</strong> '네티즌 반응' 번역은 특정 의견을 과대 대표할 수 있으므로, 전체 여론으로 일반화해서는 안 됩니다.</li>
                        <li><strong>커뮤니티 정보:</strong> Reddit, 팬 카페 등의 정보는 빠르지만, 검증되지 않은 소문일 수 있으니 주의가 필요합니다.</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center">
            <div class="flex items-center justify-center space-x-2 mb-4">
                 <img src="https://placehold.co/96x96/8b8b8b/ffffff?text=H" alt="하늘그룹 로고" class="h-8 w-8">
                 <span class="text-xl font-bold">하늘그룹</span>
            </div>
            <p class="text-gray-400">미래 혁신의 새로운 패러다임을 제시하는 글로벌 기업</p>
            <p class="text-gray-500 text-sm mt-4">&copy; 2025 하늘그룹. All rights reserved.</p>
        </div>
    </footer>

    <!-- Modal Structure -->
    <div id="modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 opacity-0 pointer-events-none z-50">
        <div id="modal-content" class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto transform scale-95 transition-transform duration-300">
            <!-- Modal content will be injected here -->
        </div>
    </div>


<script>
document.addEventListener('DOMContentLoaded', function() {
    const db = {
        kpop: [
            { name: 'Soompi', focus: '포괄적 뉴스', strength: '신뢰성, 정확성, 오랜 역사', features: '음악 차트, 심층 기사, 퀴즈', region: '글로벌, 미국, 브라질', reliability: '높음', url: 'https://www.soompi.com' },
            { name: 'The Korea Herald', focus: '공식 뉴스, 산업 동향', strength: '신뢰성, 한국적 관점, 심층 분석', features: '아티스트 활동, 차트 성과', region: '글로벌, 한국', reliability: '높음', url: 'https://www.koreaherald.com/Kpop' },
            { name: 'Seoulbeats', focus: '심층 분석, 팬 관점', strength: '사려 깊은 논평, 분석 기사', features: 'K-드라마 및 버라이어티 쇼 분석 포함', region: '글로벌', reliability: '높음', url: 'http://seoulbeats.com' },
            { name: 'AsianJunkie', focus: '캐주얼 번역, 균형 잡힌 보도', strength: '중립성, 공정성', features: '덜 적대적인 댓글 문화', region: '글로벌', reliability: '높음', url: 'https://www.asianjunkie.com' },
            { name: 'NewsNow', focus: '뉴스 취합, 실시간 업데이트', strength: '광범위한 보도, 실시간 피드', features: '트랙 리뷰, 아이돌 인터뷰, 산업 소문', region: '글로벌, 미국', reliability: '보통', url: 'https://www.newsnow.com/us/Entertainment/Music/K-Pop' },
            { name: 'Kpop Starz', focus: '속보, 사진, 비디오', strength: '시기적절한 업데이트', features: '다양한 아티스트 그룹 소식', region: '글로벌', reliability: '보통', url: 'https://www.kpopstarz.com' },
            { name: 'Reddit', focus: '커뮤니티, 실시간 토론', strength: '속보, 다양한 팬 관점', features: '사용자 생성 콘텐츠 (r/kpophelp, r/kpopthoughts)', region: '글로벌', reliability: '신중', url: 'https://www.reddit.com/r/kpop/' },
            { name: 'Koreaboo', focus: '속보, 바이럴 콘텐츠', strength: '빠른 업데이트', features: '목록, 스토리, 독점 콘텐츠', region: '글로벌', reliability: '신중', url: 'https://www.koreaboo.com' },
            { name: 'Allkpop', focus: '속보, 가십', strength: '빠른 업데이트', features: '라이프스타일, 문화 콘텐츠 포함', region: '글로벌', reliability: '신중', url: 'https://www.allkpop.com' },
            { name: 'Netizen Buzz', focus: '네티즌 댓글 번역', strength: '한국 대중 의견 통찰', features: '댓글 기반 콘텐츠', region: '글로벌', reliability: '신중', url: 'http://netizenbuzz.blogspot.com/' },
            { name: 'Hallyu Doing', focus: '영국/유럽 K-POP 이벤트', strength: '콘서트, 티켓 정보, 리뷰, 인터뷰', features: '현지 리얼리티 쇼 뉴스', region: '영국/유럽', reliability: '높음', url: 'https://www.hallyudoing.com' },
            { name: 'K-POP IN GERMANY', focus: '독일/유럽 K-POP 이벤트', strength: '투어 뉴스, 이벤트 레이더, 라이브 보고서', features: '신규 음악 발매 정보', region: '독일/유럽', reliability: '높음', url: 'https://kpopingermany.com' },
            { name: 'K-POPENMEXICO', focus: '멕시코 K-POP/엔터테인먼트', strength: '독점 인터뷰, 컴백 발표', features: '현지 스캔들 업데이트', region: '멕시코', reliability: '보통', url: 'https://www.kpopenmexico.com' },
            { name: 'CNN Brasil (K-pop)', focus: '브라질 K-POP/엔터테인먼트', strength: '독점 인터뷰, 군 복무 업데이트, 협업', features: '현지 콘서트 발표', region: '브라질', reliability: '높음', url: 'https://www.cnnbrasil.com.br/tudo-sobre/k-pop' },
            { name: 'KBS WORLD French', focus: '프랑스어 K-POP/엔터테인먼트', strength: '그룹 성과, 아티스트 자선 활동, 차트 성과', features: '문화 행사 정보', region: '프랑스', reliability: '높음', url: 'http://world.kbs.co.kr/french' },
        ],
        kdrama: [
            { name: 'Soompi', type: '뉴스, 요약, 리뷰', specialty: '속보, 심층 분석, 에피소드 업데이트', region: '글로벌', usp: '가장 오래된 K-POP/K-드라마 사이트', reliability: '높음', url: 'https://www.soompi.com/k-drama' },
            { name: 'Dramabeans', type: '요약, 리뷰, 커뮤니티', specialty: '상세한 에피소드 요약, 팬 토론', region: '글로벌', usp: '팬 중심 토론, 오픈 스레드', reliability: '높음', url: 'https://www.dramabeans.com' },
            { name: 'The Korea Herald', type: '뉴스, 인터뷰, 의견', specialty: '공식 뉴스, 산업 동향', region: '글로벌, 한국', usp: '신뢰할 수 있는 한국 기반 뉴스', reliability: '높음', url: 'https://www.koreaherald.com/' },
            { name: 'SCMP (K-drama)', type: '뉴스, 리뷰, 배우 이야기', specialty: '한류 스크린 웨이브, 넷플릭스 제작', region: '글로벌', usp: '심층 리뷰, 산업 분석', reliability: '높음', url: 'https://www.scmp.com/topics/k-drama-news' },
            { name: 'Reddit (r/KDRAMA)', type: '커뮤니티, 토론, 추천', specialty: '커뮤니티 주도, 속보', region: '글로벌', usp: '다양한 의견, 실시간 토론', reliability: '보통', url: 'https://www.reddit.com/r/KDRAMA/' },
            { name: 'Netflix', type: '스트리밍, 오리지널', specialty: '방대한 K-드라마 라이브러리', region: '글로벌', usp: '대규모 투자, 독점 콘텐츠', reliability: '높음', url: 'https://www.netflix.com' },
            { name: 'Viki Global TV', type: '스트리밍', specialty: '광범위한 한국 콘텐츠, 다국어 자막', region: '글로벌', usp: '팬 참여 번역', reliability: '높음', url: 'https://www.viki.com' },
            { name: 'Disney+', type: '스트리밍', specialty: 'K-드라마 라이브러리 확장', region: '글로벌', usp: '주요 스트리밍 플랫폼', reliability: '높음', url: 'https://www.disneyplus.com' },
            { name: 'CNN Brasil (K-drama)', type: '뉴스, 업데이트', specialty: '신규 발매, 스트리밍 가용성', region: '브라질', usp: '지역별 이벤트, K-POP/K-드라마 교차점', reliability: '높음', url: 'https://www.cnnbrasil.com.br/tudo-sobre/k-drama' },
            { name: 'Infobae Mexico', type: '뉴스, 리뷰', specialty: '"최고의" 목록, 상세 분석', region: '멕시코', usp: '상세 줄거리, 테마 분석', reliability: '보통', url: 'https://www.infobae.com/que-puedo-ver' },
            { name: 'T JAPAN', type: '뉴스, 추천', specialty: '큐레이션된 기사, 테마별 가이드', region: '일본', usp: '독특한 테마 분류, 전문가 추천', reliability: '높음', url: 'https://www.tjapan.jp/entertainment' },
        ],
        kmovie: [
            { name: 'Koreanfilm.org', focus: '리뷰, 산업 뉴스, 영화제', features: '역사적 에세이, 박스 오피스 데이터', region: '글로벌', for: '진지한 영화 애호가, 연구자', reliability: '높음', url: 'http://www.koreanfilm.org' },
            { name: 'ScreenDaily', focus: '산업 뉴스, 전문 리뷰', features: '영화 자금 지원 뉴스, 산업 동향', region: '글로벌', for: '산업 전문가, 비평가', reliability: '높음', url: 'https://www.screendaily.com' },
            { name: 'MOVIE WALKER PRESS', focus: '뉴스, 박스 오피스, 이벤트', features: '시사회, 예고편, 시상식', region: '일본', for: '일본 영화 팬', reliability: '보통', url: 'https://moviewalker.jp/news/list/c_genre_37/' },
            { name: 'La Cinémathèque française', focus: '공식 뉴스, 산업 보고서', features: 'KOFIC 데이터, 전문가 인터뷰', region: '프랑스', for: '프랑스 시청자, 연구자', reliability: '높음', url: 'https://www.cinematheque.fr/rechercher.html?q=cor%C3%A9en' },
            { name: 'Rotten Tomatoes', focus: '비평적 집계, 추천', features: '"신선도 보증" 목록', region: '글로벌', for: '비평가, 일반 시청자', reliability: '보통', url: 'https://editorial.rottentomatoes.com/guide/south-korean-certified-fresh-movies/' },
            { name: 'TecMundo (Dramaland)', focus: '수상 영화, 정보', features: '수상 경력, 스트리밍 정보', region: '브라질', for: '브라질 시청자', reliability: '보통', url: 'https://www.tecmundo.com.br/minha-serie' },
            { name: 'TikTok', focus: '사용자 추천, 토론', features: '시각적 콘텐츠, 트렌딩 영화', region: '글로벌', for: '캐주얼 시청자, 트렌드 팔로워', reliability: '신중', url: '#' },
            { name: 'Reddit (r/koreanfilm)', focus: '커뮤니티, 추천', features: '팬 주도 추천, 토론', region: '글로벌', for: '커뮤니티 참여자', reliability: '신중', url: 'https://www.reddit.com/r/koreanfilm/' }
        ]
    };

    const contentArea = document.getElementById('content-area');
    const tabs = document.querySelectorAll('.tab-item');
    let currentTab = 'kpop';
    let chartInstance = null;
    const modal = document.getElementById('modal');
    const modalContent = document.getElementById('modal-content');

    function getReliabilityClass(reliability) {
        switch (reliability) {
            case '높음': return 'reliability-high';
            case '보통': return 'reliability-medium';
            case '신중': return 'reliability-caution';
            default: return 'bg-gray-200 text-gray-800';
        }
    }

    function openModal(item, category) {
        let detailsHtml = `
            <div class="p-6">
                <div class="flex justify-between items-start">
                    <h3 class="text-2xl font-bold mb-4">${item.name}</h3>
                    <button id="close-modal" class="text-gray-500 hover:text-gray-800">&times;</button>
                </div>
        `;
        
        if (category === 'kpop') {
            detailsHtml += `
                <p class="mb-2"><strong>주요 초점:</strong> ${item.focus}</p>
                <p class="mb-2"><strong>강점:</strong> ${item.strength}</p>
                <p class="mb-2"><strong>주목할 만한 기능:</strong> ${item.features}</p>
                <p class="mb-4"><strong>지역 관련성:</strong> ${item.region}</p>
            `;
        } else if (category === 'kdrama') {
             detailsHtml += `
                <p class="mb-2"><strong>콘텐츠 유형:</strong> ${item.type}</p>
                <p class="mb-2"><strong>전문 분야:</strong> ${item.specialty}</p>
                <p class="mb-2"><strong>지역 범위:</strong> ${item.region}</p>
                <p class="mb-4"><strong>고유 판매 지점:</strong> ${item.usp}</p>
            `;
        } else { // kmovie
             detailsHtml += `
                <p class="mb-2"><strong>초점 영역:</strong> ${item.focus}</p>
                <p class="mb-2"><strong>주요 기능:</strong> ${item.features}</p>
                <p class="mb-2"><strong>지역 범위:</strong> ${item.region}</p>
                <p class="mb-4"><strong>추천 대상:</strong> ${item.for}</p>
            `;
        }

        detailsHtml += `
                <div class="mt-6 flex justify-end">
                    <a href="${item.url}" target="_blank" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">사이트 방문</a>
                </div>
            </div>
        `;

        modalContent.innerHTML = detailsHtml;
        modal.classList.remove('opacity-0', 'pointer-events-none');
        modalContent.classList.remove('scale-95');
        document.getElementById('close-modal').onclick = closeModal;
    }

    function closeModal() {
        modal.classList.add('opacity-0', 'pointer-events-none');
        modalContent.classList.add('scale-95');
    }

    function renderContent(tab) {
        const data = db[tab];
        const allRegions = ['전체', ...new Set(data.map(item => item.region.split(', ')).flat())];
        const allReliability = ['전체', '높음', '보통', '신중'];

        let html = `
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Filters and Chart -->
                <div class="lg:col-span-1 bg-white p-6 rounded-lg shadow-lg h-fit sticky top-24">
                    <h3 class="text-xl font-bold mb-4">필터 및 분석</h3>
                    <!-- Reliability Filter -->
                    <div class="mb-4">
                        <label for="reliability-filter" class="block text-sm font-medium text-gray-700 mb-1">신뢰도</label>
                        <select id="reliability-filter" class="w-full p-2 border border-gray-300 rounded-md">
                            ${allReliability.map(r => `<option value="${r}">${r}</option>`).join('')}
                        </select>
                    </div>
                    <!-- Region Filter -->
                    <div class="mb-6">
                        <label for="region-filter" class="block text-sm font-medium text-gray-700 mb-1">지역</label>
                        <select id="region-filter" class="w-full p-2 border border-gray-300 rounded-md">
                            ${allRegions.map(r => `<option value="${r}">${r}</option>`).join('')}
                        </select>
                    </div>
                    <!-- Chart -->
                    <div class="chart-container relative h-64 w-full max-w-sm mx-auto">
                        <canvas id="reliabilityChart"></canvas>
                    </div>
                </div>

                <!-- Source Cards -->
                <div class="lg:col-span-2">
                    <div id="cards-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${generateCards(data)}
                    </div>
                </div>
            </div>
        `;
        contentArea.innerHTML = html;
        updateChart(data);
        addEventListeners(tab);
    }
    
    function generateCards(data) {
        if (data.length === 0) {
            return `<div class="md:col-span-2 text-center py-12 bg-white rounded-lg shadow-md">
                <i class="ri-search-eye-line text-4xl text-gray-400 mb-4"></i>
                <p class="text-gray-600">선택한 필터에 해당하는 결과가 없습니다.</p>
            </div>`;
        }

        return data.map(item => `
            <div class="feature-card bg-white p-6 rounded-lg shadow-md flex flex-col justify-between">
                <div>
                    <div class="flex justify-between items-start mb-3">
                         <h4 class="text-lg font-bold">${item.name}</h4>
                         <span class="tag ${getReliabilityClass(item.reliability)}">${item.reliability}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">${item.focus || item.type || item.specialty}</p>
                </div>
                <div class="mt-4 flex justify-between items-center">
                    <span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">${item.region}</span>
                    <button class="text-sm text-blue-600 hover:underline" data-name="${item.name}">상세보기</button>
                </div>
            </div>
        `).join('');
    }

    function updateChart(data) {
        const reliabilityCounts = data.reduce((acc, item) => {
            acc[item.reliability] = (acc[item.reliability] || 0) + 1;
            return acc;
        }, {});

        const chartData = {
            labels: Object.keys(reliabilityCounts),
            datasets: [{
                data: Object.values(reliabilityCounts),
                backgroundColor: Object.keys(reliabilityCounts).map(r => {
                    if (r === '높음') return '#10B981';
                    if (r === '보통') return '#F59E0B';
                    if (r === '신중') return '#EF4444';
                    return '#9CA3AF';
                }),
                borderColor: '#fff',
                borderWidth: 2,
            }]
        };

        const ctx = document.getElementById('reliabilityChart').getContext('2d');
        if (chartInstance) {
            chartInstance.destroy();
        }
        chartInstance = new Chart(ctx, {
            type: 'doughnut',
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    label += context.parsed + '개';
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });
    }

    function addEventListeners(tab) {
        const reliabilityFilter = document.getElementById('reliability-filter');
        const regionFilter = document.getElementById('region-filter');
        const cardsContainer = document.getElementById('cards-container');

        function applyFilters() {
            const selectedReliability = reliabilityFilter.value;
            const selectedRegion = regionFilter.value;
            let filteredData = db[tab];

            if (selectedReliability !== '전체') {
                filteredData = filteredData.filter(item => item.reliability === selectedReliability);
            }
            if (selectedRegion !== '전체') {
                filteredData = filteredData.filter(item => item.region.includes(selectedRegion));
            }
            
            cardsContainer.innerHTML = generateCards(filteredData);
            updateChart(filteredData);
            
            // Re-add event listeners for new cards
            cardsContainer.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', () => {
                    const itemName = button.dataset.name;
                    const itemData = db[tab].find(d => d.name === itemName);
                    openModal(itemData, tab);
                });
            });
        }
        
        reliabilityFilter.addEventListener('change', applyFilters);
        regionFilter.addEventListener('change', applyFilters);
        
        cardsContainer.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', () => {
                const itemName = button.dataset.name;
                const itemData = db[tab].find(d => d.name === itemName);
                openModal(itemData, tab);
            });
        });
    }

    tabs.forEach(tabButton => {
        tabButton.addEventListener('click', () => {
            tabs.forEach(btn => btn.classList.remove('active-tab', 'text-blue-600'));
            tabButton.classList.add('active-tab', 'text-blue-600');
            currentTab = tabButton.dataset.tab;
            renderContent(currentTab);
        });
    });
    
    // Initial render
    renderContent(currentTab);
    
    // Modal close logic
    modal.addEventListener('click', function(e) {
        if (e.target === this) {
            closeModal();
        }
    });
});
</script>
</body>
</html>